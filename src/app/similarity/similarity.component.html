<div class="container">
    <div class="row">
      <div class="col-8">

      

      <div class="row mt-4">
          <div class="col-3">
          <label class="btn btn-outline-primary btn-lg" for="my-file-selector">
            <input id="my-file-selector" type="file" style="display:none;" accept=".sdf" (change)="change($event.target.files)">
            BROWSE FILE
          </label>
        </div>
      </div> 
        <!--<div class="form-group row">
          <label class="col-2 control-label" for="ifile">Input </label>
          <div class="col-10">
              <div class="form-group">
                <label for="exampleInputFile" class="bmd-label-floating">File input</label>
                <input type="file" class="form-control-file" id="exampleInputFile">
                <small class="text-muted">This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.</small>
              </div>
          </div>
        </div>-->

        <div class="form-group ">
          <label for="space">Space</label>
              <select class="form-control w-50" [(ngModel)]="this.space" name="space"> 
                <option *ngFor="let value of objectKeys(this.spaces)" [value]='value'>
                {{value}}
                </option>
            </select>
        </div>

        <div class="form-group w-50">
          <label for="version">Version</label>
            <select class="form-control" [(ngModel)]="this.version" name="version"> 
                <option *ngFor="let value of this.spaces[this.space]" [value]='value'>
                {{value}}
                </option>
            </select>
        </div>
        <fieldset class="form-group">
            <div class="row">
              <legend class="col-form-label">Distance type</legend>
              <div class="col-sm-10">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios1" value="option1" checked>
                  <label class="form-check-label" for="gridRadios1">
                    Euclidian
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="gridRadios" id="gridRadios2" value="option2">
                  <label class="form-check-label" for="gridRadios2">
                   Tanimoto
                  </label>
                </div>
              </div>
            </div>
          </fieldset>
        <div class="form-group w-25">
            <label for="inputPassword6">Cutoff</label>
            <input type="number" id="cutoff" class="form-control mx-sm-1" aria-describedby="cutoffhelp">
            <small id="cutoffhelp" class="text-muted">
              Distance cutoff.
            </small>
          </div>
      </div>

      <div class="col-4 ">
        <button class="btn btn-outline-primary" role="button" id="search" (click) = "search()" >Search</button>
        <!--<button class="btn btn-outline-secondary" role="button" id="export" disabled="true">Export</button>-->
      </div>

    </div>

    <div class="row" *ngIf = "this.result.length > 0">


      <div class="col-12" >
        <h4>Similarity Results</h4>
      </div>

      <div class="col-12" *ngIf = "this.result.length > 0">
        <table class="table table-fixed table-bordered table-striped" id="data-table">
          <thead>
            <tr>
              <th>Index</th>
              <th data-toggle="tooltip" data-placement="top" data-html="true" title="<span>Query column name from query test set</span>">Query name</th>
              <th data-toggle="tooltip" data-placement="top" data-html="true" title="<span>Query molecule from query test set</span>">Query molecule</th>
              <th data-toggle="tooltip" data-placement="top" data-html="true" title="<span>Reference column name from Reference training set</span>">Reference name</th>
              <th data-toggle="tooltip" data-placement="top" data-html="true"  title="<span>Reference molecule column from Reference training set</span>">Reference molecule</th>
              <th data-toggle="tooltip" data-placement="top" data-html="true"  title="<span>Similarity distance score: Tanimoto for binary descriptors and Euclidean for continues ones</span>">Similarity</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let src of this.nameSrc;let i=index">
              <tr *ngFor="let pred of this.result[i].names;let j=index">
                <td class="align-middle" width="">{{i}} - {{j}}</td>
                <td class="align-middle" >{{this.nameSrc[i]}}</td>
                <td class="align-middle"><canvas #cmp id="{{'query_' + i + '_' + j}}" width="300" height="150">{{this.smileSrc[i]}}</canvas></td>
                <td class="align-middle">{{this.result[i].names[j]}}</td>
                <td class="align-middle"><canvas #cmp id="{{'ref_' + i + '_' + j}}" width="300" height="150">{{this.result[i].SMILES[j]}}</canvas></td>
                <td class="align-middle">{{this.result[i].distances[j].toFixed(3)}}</td>
              </tr>
            </ng-container>
          </tbody>
        </table>
      </div>

    </div>
    <div class="row">
      <div class="loader" id="processing" hidden="true"></div>
    </div>

  </div>
